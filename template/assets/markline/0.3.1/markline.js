define("markline/0.3.1/markline",["jquery/2.1.1/jquery"],function(e,t,a){function r(e,t){this.element=e;var a=l(t);this.timeline=new o(this.element,a)}function n(e){if(!e)return new Date;var t=/^(\d{4})(?:[/-](\d{1,2})(?:[/-](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2}))?)?)?)?)?$/,a=e.match(t);if(a){var r=a[1],n=a[2]||0,s=a[3]||1,i=a[4]||0,l=a[5]||0,o=a[6]||0;return new Date(r,n,s,i,l,o)}}function s(e){var t=/^\d{4}$/,a=/^\d{4}[\/\-]\d{1,2}$/,r=n(e);return t.test(e)?r.setYear(r.getFullYear()+1):a.test(e)&&(11===r.getMonth()?(r.setYear(r.getFullYear()+1),r.setMonth(0)):r.setMonth(r.getMonth()+1)),r}function i(e){var t=/!\[([^\]]*)\]\(([^\)]+)\)/g,a=/\[([^\]]*)\]\(([^\)]+)\)/g,r=/(\*\*|__)(.*?)\1/g,n=/(\*|_)(.*?)\1/g,s=/(\~\~?)(.*?)\1/g,i=e.replace(t,'<a href="$2" class="img" title="$1" target="_blank">$1</a>');return i=i.replace(a,'<a href="$2" target="_blank">$1</a>'),i=i.replace(r,"<strong>$2</strong>"),i=i.replace(n,"<em>$2</em>"),i=i.replace(s,"<del>$2</del>")}function l(e){function t(e){for(;l.body.hasOwnProperty(e);)e+=" ";f=i(e),l.body[f]=[],v=!0}for(var a,r=e.split(/\r\n|\r|\n/),l={title:"",meta:{},body:{}},o=/^#\s+(.*)$/,d=/^[\-\*]\s+([^:]+):\s*(.*)$/,h=/^\-{2,}$/,p=/^##+\s+(.*)$/,u=/^[\*\-]\s+(([0-9\/\-]+)(?:~([0-9\/\-]*))?)\s+(.*)$/,c=/^\s+[\*\-]\s+(([0-9\/\-]+)(?:~([0-9\/\-]*))?)\s+(.*)$/,f="",v=!1,m=!1,g=0,y=r.length;y>g;g++){var b,$=r[g];if(b=$.match(o))l.title=i(b[1]);else if(!v&&(b=$.match(d))){var _=b[1],j=b[2];l.meta[_]=j,m=!0}else if($.match(h))t("");else if(b=$.match(p)){var w=b[1];t(w)}else if(b=$.match(u)){l.body[f]||(l.body[f]=[]);var q=b[2],k=void 0===b[3]?q:b[3],x=b[4],Y={date:b[1],"date-start":n(q),"date-end":s(k),name:i(x),events:[]};l.body[f].push(Y),a=Y,v=!0}else if(b=$.match(c)){var F=b[1],M=b[2],D=void 0===b[3]?M:b[3],O=b[4];a.events.push({date:F,"date-start":n(M),"date-end":s(D),name:i(O)}),v=!0}}return l}{var o=e("markline/0.3.1/timeline");e("jquery/2.1.1/jquery")}r.prototype.render=function(){this.timeline.render()},a.exports=r}),define("markline/0.3.1/timeline",["jquery/2.1.1/jquery"],function(e,t,a){function r(e,t){this._element=i(e),this.title=t.title||"",this.meta=t.meta||{},this.body=t.body||{}}function n(e){return parseInt(e/864e5*o/365.24,10)}function s(e){return"[object Function]"===Object.prototype.toString.call(e)}var i=e("jquery/2.1.1/jquery"),l=30,o=100;r.prototype._process=function(e,t){if(t)for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];s(t["group:start"])&&t["group:start"].call(this,a,r);for(var n=0,i=r.length;i>n;n++){var l=r[n];if(s(t["line:start"])&&t["line:start"].call(this,l),l.events)for(var o=0,d=l.events.length;d>o;o++)s(t.event)&&t.event.call(this,l.events[o]);s(t["line:stop"])&&t["line:stop"].call(this,l)}s(t["group:stop"])&&t["group:stop"].call(this,a,r)}},r.prototype.render=function(){var e,t;this._process(this.body,{"line:start":function(a){var r=a["date-start"],n=a["date-end"];(!e||e>r)&&(e=r),(!t||n>t)&&(t=n)}});var a=e.getFullYear(),r=t.getFullYear()+2;e=new Date(a,0,1);for(var s=['<div class="dates">',"<ol>"],o=a,d=0;r>=o;o++,d++)s.push("<li><label>",o,"show"===this.meta.age?" ("+d+")":"","</label></li>");s.push("</ol>","</div>");var h=['<div class="events" id="events">'],p=0;this._process(this.body,{"group:start":function(e){h.push('<div class="groups">',"<label>",e,"</label>","<ol>")},"group:stop":function(){h.push("</ol>","</div>")},"line:start":function(t){var a=t["date-start"],r=t["date-end"],s=n(a-e)+l;p=a;var i=n(r-a);8>i&&(i=8),h.push('<li style="margin-left:',s,'px;">',"<div>",'<ol style="width:',i,'px;">')},"line:stop":function(e){h.push("</ol>","<time>",e.date,"</time>","<label>",e.name,"</label>","</div>","</li>")},event:function(e){var t=n(e["date-start"]-p),a=n(e["date-end"]-e["date-start"]);8>a&&(a=8),h.push('<li style="left:',t,"px;width:",a,'px" title="',e.date," ",e.name,'"></li>')}});this._element.addClass("markline"),this._element.on("scroll",function(){var e=i(this),t=i("> header",this);t.css({left:e.scrollLeft(),bottom:-e.scrollTop()});var a=i(".dates",this);a.css({top:e.scrollTop()});var r=i(".groups > label",this);r.css({left:e.scrollLeft()-90})}),this._element.append(["<header>",this.title,"</header>"].join("")),this._element.append(s.join("")),this._element.append(h.join(""))},a.exports=r});